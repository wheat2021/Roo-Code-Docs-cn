---
sidebar_label: 为何我们没有采用多语言文档
---

# 关于文档多语言支持的说明

本文档旨在记录我们在为该文档站点添加多语言支持（国际化，i18n）时所做的尝试、遇到的问题以及最终的解决方案。

## 目标

最初的目标是在文档站点上添加一个语言切换器，允许用户在英文和中文之间切换，同时确保两种语言环境下所有链接都能正常工作。

## 尝试与遇到的问题

在实现这一目标的过程中，我们遇到了一个非常顽固的“页面未找到”（Page Not Found）错误。每当切换到中文环境后，除了首页之外的所有链接都会失效，并且 URL 路径会出现异常的重复追加（例如 `.../zh-CN/zh-CN/`）。

我们进行了以下一系列的诊断和修复尝试：

1.  **基础国际化配置**：我们首先按照 Docusaurus 的官方文档，在 `docusaurus.config.ts` 中添加了 `i18n` 配置，并创建了中文翻译文件。
    *   **问题**：这导致了最初的“页面未找到”错误。

2.  **添加 `slug`**：我们发现当文档作为站点主页时，需要在元数据中为每个语言版本添加 `slug: /`。
    *   **问题**：此修复未能解决问题。

3.  **提供后备内容**：我们意识到 Docusaurus 在切换语言后，需要为所有页面提供对应语言的文件，即使它们尚未被翻译。因此，我们将所有英文文档复制到了中文语言目录中作为后备。
    *   **问题**：问题依旧存在。

4.  **添加侧边栏文件**：我们发现当文档作为主页时，每种语言都需要一个对应的侧边栏文件。因此，我们为中文环境复制了 `sidebars.ts` 文件。
    *   **问题**：问题依旧存在。

5.  **调查自定义组件**：在排除了所有标准配置问题后，我们怀疑是项目中的自定义组件覆盖了 Docusaurus 的默认行为。我们最终将问题锁定在了一个被深度自定义的导航链接组件上（`src/theme/NavbarItem/NavbarNavLink.tsx`）。
    *   **问题**：多次尝试修复该组件中的链接生成逻辑，都未能解决 URL 重复追加的问题。

6.  **删除自定义组件**：作为最后的手段，我们删除了整个自定义的导航组件目录（`src/theme/NavbarItem`），以强制 Docusaurus 回退到其内置的、功能正常的默认组件。
    *   **问题**：令人费解的是，即使移除了所有相关的自定义代码，问题仍然存在。

7.  **调查第三方插件**：我们怀疑是第三方搜索插件 `@easyops-cn/docusaurus-search-local` 与国际化功能存在冲突，并尝试禁用了它。
    *   **问题**：问题依旧存在。

8.  **清除缓存**：在整个过程中，我们多次清除了 Docusaurus 的缓存目录（`.docusaurus`），以确保我们的更改能够生效。

## 结论与解决方案

在经历了所有这些尝试之后，那个核心的路由问题依然存在。这表明问题的根源可能在于项目更深层次的配置、依赖版本冲突，或是某个我们未能发现的、更隐蔽的自定义项。

为了不再耗费更多的时间进行调试，并尽快为中文用户提供可用的文档，我们决定采取一个更直接的方案：**放弃多语言功能，直接将文档站点的默认语言替换为中文。**

对于希望查看原始英文文档的用户，可以访问官方文档站点：[https://docs.roocode.com](https://docs.roocode.com)。

我们希望这份记录能为未来重新尝试实现多语言支持时提供有价值的参考。